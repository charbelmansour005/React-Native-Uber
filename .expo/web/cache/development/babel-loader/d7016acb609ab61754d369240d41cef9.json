{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { useToast } from \"react-native-toast-notifications\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport * as Location from \"expo-location\";\nimport { StatusBar } from \"expo-status-bar\";\nimport { themeColors } from \"../../config/themeColors\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport { styles } from \"./styles\";\nimport { Durations } from \"../../helpers/durations\";\nimport { LandingMapView, LandingSignInBTN, LandingSignUpBTN } from \"../../components/index\";\nimport OriginalLoader from \"../../components/UI/OriginalLoader\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar initialRegion = {\n  latitude: 33.8938,\n  longitude: 35.5018,\n  latitudeDelta: 2.01,\n  longitudeDelta: 2.01\n};\nvar initialLandingState = {\n  showChip: true,\n  viewHeight: \"89%\",\n  loading: false,\n  errorMsg: null,\n  mapRegion: initialRegion\n};\nexport default function Landing(_ref) {\n  var navigation = _ref.navigation;\n  var replace = navigation.replace;\n  var _useState = useState(initialLandingState),\n    _useState2 = _slicedToArray(_useState, 2),\n    landingState = _useState2[0],\n    setLandingState = _useState2[1];\n  var toast = useToast();\n  var landingToast = function landingToast() {\n    return toast.show(\"Use this map to find interesting locations and plan ahead a great adventure.\\n\\nPlease note in order to start your adventure, you must sign up/login.\", {\n      placement: \"top\",\n      duration: Durations.LONG,\n      animationType: \"slide-in\",\n      normalColor: themeColors.googleGray,\n      type: \"normal\",\n      style: {\n        marginTop: 100,\n        opacity: 0.8\n      },\n      textStyle: {\n        fontWeight: \"300\",\n        color: \"white\"\n      },\n      icon: _jsx(Ionicons, {\n        name: \"map\",\n        size: 10,\n        color: themeColors.googleGreen\n      })\n    });\n  };\n  var fetchUserLocation = useCallback(_asyncToGenerator(function* () {\n    try {\n      setLandingState(function (prevState) {\n        return _objectSpread(_objectSpread({}, prevState), {}, {\n          loading: true\n        });\n      });\n      var _yield$Location$reque = yield Location.requestForegroundPermissionsAsync(),\n        status = _yield$Location$reque.status;\n      if (status !== \"granted\") {\n        setLandingState(function (prevState) {\n          return _objectSpread(_objectSpread({}, prevState), {}, {\n            errorMsg: \"Permission to access location was denied\"\n          });\n        });\n        return;\n      }\n      var location = yield Location.getCurrentPositionAsync({});\n      setLandingState(function (prevState) {\n        return _objectSpread(_objectSpread({}, prevState), {}, {\n          mapRegion: {\n            latitude: location.coords.latitude,\n            longitude: location.coords.longitude,\n            latitudeDelta: 0.001,\n            longitudeDelta: 0.001\n          },\n          loading: false\n        });\n      });\n    } catch (error) {\n      console.log(error);\n      setLandingState(function (prevState) {\n        return _objectSpread(_objectSpread({}, prevState), {}, {\n          loading: false\n        });\n      });\n      toast.show(\"There was an error\\nPlease try again\", {\n        placement: \"center\",\n        type: \"error\"\n      });\n      setTimeout(fetchUserLocation, 2000);\n    }\n  }), [landingState.mapRegion]);\n  useEffect(function () {\n    fetchUserLocation();\n    landingToast();\n  }, []);\n  var wrapperStyles = [styles.mainWrapper, {\n    borderTopColor: landingState.loading ? \"orange\" : themeColors.googleGreen\n  }];\n  return _jsxs(SafeAreaView, {\n    style: styles.container,\n    children: [_jsx(StatusBar, {\n      backgroundColor: themeColors.googleLightGray,\n      style: \"dark\"\n    }), _jsx(View, {\n      style: landingState.loading ? _objectSpread({\n        height: landingState.viewHeight\n      }, styles.blur) : _objectSpread({\n        height: landingState.viewHeight\n      }, styles.normal),\n      children: _jsx(LandingMapView, {\n        mapRegion: landingState.mapRegion\n      })\n    }), _jsx(_Fragment, {\n      children: landingState.loading && _jsx(View, {\n        style: styles.centerLoad,\n        children: _jsx(OriginalLoader, {})\n      })\n    }), _jsxs(View, {\n      style: wrapperStyles,\n      children: [landingState.errorMsg && _jsx(Text, {\n        children: landingState.errorMsg\n      }), _jsxs(View, {\n        style: styles.belowButtons,\n        children: [_jsx(LandingSignUpBTN, {\n          replace: replace\n        }), _jsx(LandingSignInBTN, {\n          replace: replace\n        })]\n      })]\n    })]\n  });\n}","map":{"version":3,"names":["React","useState","useEffect","useCallback","useToast","Location","StatusBar","themeColors","Ionicons","styles","Durations","LandingMapView","LandingSignInBTN","LandingSignUpBTN","OriginalLoader","initialRegion","latitude","longitude","latitudeDelta","longitudeDelta","initialLandingState","showChip","viewHeight","loading","errorMsg","mapRegion","Landing","navigation","replace","landingState","setLandingState","toast","landingToast","show","placement","duration","LONG","animationType","normalColor","googleGray","type","style","marginTop","opacity","textStyle","fontWeight","color","icon","googleGreen","fetchUserLocation","prevState","requestForegroundPermissionsAsync","status","location","getCurrentPositionAsync","coords","error","console","log","setTimeout","wrapperStyles","mainWrapper","borderTopColor","container","googleLightGray","height","blur","normal","centerLoad","belowButtons"],"sources":["/Users/charbelmansour/uber/src/screens/Landing/index.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\"\nimport { useToast } from \"react-native-toast-notifications\"\nimport { View, Text, SafeAreaView } from \"react-native\"\nimport * as Location from \"expo-location\"\nimport { StatusBar } from \"expo-status-bar\"\nimport { themeColors } from \"../../config/themeColors\"\nimport { Ionicons } from \"@expo/vector-icons\"\nimport { Chip } from \"react-native-paper\"\nimport { StackNavigationProp } from \"@react-navigation/stack\"\nimport { RootStackParamList } from \"../../navigation/Navigation\"\nimport { styles } from \"./styles\"\nimport { Durations } from \"../../helpers/durations\"\nimport {\n  LandingMapView,\n  LandingSignInBTN,\n  LandingSignUpBTN,\n} from \"../../components/index\"\nimport OriginalLoader from \"../../components/UI/OriginalLoader\"\n\nconst initialRegion = {\n  latitude: 33.8938,\n  longitude: 35.5018,\n  latitudeDelta: 2.01,\n  longitudeDelta: 2.01,\n}\n\ntype Region = typeof initialRegion\n\ntype NavigationProps = StackNavigationProp<\n  RootStackParamList,\n  \"SignUp\" | \"Login\"\n>\n\ntype Props = {\n  navigation: NavigationProps\n}\n\ntype LandingState = {\n  showChip: boolean\n  viewHeight: string\n  loading: boolean\n  errorMsg: string | null\n  mapRegion: Region\n}\n\nconst initialLandingState: LandingState = {\n  showChip: true,\n  viewHeight: \"89%\",\n  loading: false,\n  errorMsg: null,\n  mapRegion: initialRegion,\n}\n\nexport default function Landing({ navigation }: Props) {\n  const { replace } = navigation\n  const [landingState, setLandingState] =\n    useState<LandingState>(initialLandingState)\n\n  const toast = useToast()\n\n  const landingToast = () =>\n    toast.show(\n      \"Use this map to find interesting locations and plan ahead a great adventure.\\n\\nPlease note in order to start your adventure, you must sign up/login.\",\n      {\n        placement: \"top\",\n        duration: Durations.LONG,\n        animationType: \"slide-in\",\n        normalColor: themeColors.googleGray,\n        type: \"normal\",\n        style: { marginTop: 100, opacity: 0.8 },\n        textStyle: {\n          fontWeight: \"300\",\n          color: \"white\",\n        },\n        icon: <Ionicons name=\"map\" size={10} color={themeColors.googleGreen} />,\n      }\n    )\n\n  const fetchUserLocation = useCallback(async () => {\n    try {\n      setLandingState((prevState) => ({\n        ...prevState,\n        loading: true,\n      }))\n      let { status } = await Location.requestForegroundPermissionsAsync()\n      if (status !== \"granted\") {\n        setLandingState((prevState) => ({\n          ...prevState,\n          errorMsg: \"Permission to access location was denied\",\n        }))\n        return\n      }\n      let location = await Location.getCurrentPositionAsync({})\n      setLandingState((prevState) => ({\n        ...prevState,\n        mapRegion: {\n          latitude: location.coords.latitude,\n          longitude: location.coords.longitude,\n          latitudeDelta: 0.001,\n          longitudeDelta: 0.001,\n        },\n        loading: false,\n      }))\n    } catch (error) {\n      console.log(error)\n      setLandingState((prevState) => ({\n        ...prevState,\n        loading: false,\n      }))\n      toast.show(\"There was an error\\nPlease try again\", {\n        placement: \"center\",\n        type: \"error\",\n      })\n      // retry after 2 seconds\n      setTimeout(fetchUserLocation, 2000)\n    }\n  }, [landingState.mapRegion])\n\n  useEffect(() => {\n    fetchUserLocation()\n    landingToast()\n  }, [])\n\n  const wrapperStyles = [\n    styles.mainWrapper,\n    {\n      borderTopColor: landingState.loading ? \"orange\" : themeColors.googleGreen,\n    },\n  ]\n\n  return (\n    <SafeAreaView style={styles.container}>\n      <StatusBar backgroundColor={themeColors.googleLightGray} style=\"dark\" />\n      <View\n        style={\n          landingState.loading\n            ? { height: landingState.viewHeight, ...styles.blur }\n            : { height: landingState.viewHeight, ...styles.normal }\n        }\n      >\n        <LandingMapView mapRegion={landingState.mapRegion} />\n      </View>\n      <>\n        {landingState.loading && (\n          <View style={styles.centerLoad}>\n            <OriginalLoader />\n          </View>\n        )}\n      </>\n      <View style={wrapperStyles}>\n        {landingState.errorMsg && <Text>{landingState.errorMsg}</Text>}\n        <View style={styles.belowButtons}>\n          <LandingSignUpBTN replace={replace} />\n          <LandingSignInBTN replace={replace} />\n        </View>\n      </View>\n    </SafeAreaView>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}